# Polish Cities Agency Discovery Tracking

This file tracks which Polish cities have been scanned for real estate agencies that work with Costa del Sol/Marbella properties.

## Current Polish Cities List (50 cities, prioritized by population)

| City | Population Rank | Scanned | Agencies Found | Date Scanned | Notes |
|------|----------------|---------|----------------|--------------|-------|
| Warsaw | 1 | ✅ | 14 | 2025-10-09 | Initial scan - 14 agencies found |
| Krakow | 2 | ✅ | 5 | 2025-10-09 | Batch scan - 5 agencies found |
| Lodz | 3 | ✅ | 4 | 2025-10-09 | Batch scan - 4 agencies found |
| Wroclaw | 4 | ✅ | 5 | 2025-10-09 | Batch scan - 5 agencies found |
| Poznan | 5 | ✅ | 5 | 2025-10-09 | Batch scan - 5 agencies found |
| Gdansk | 6 | ✅ | 2 | 2025-10-09 | Batch scan - 2 agencies found |
| Szczecin | 7 | ✅ | 9 | 2025-10-09 | Batch scan - 6 agencies found |
| Bydgoszcz | 8 | ✅ | 7 | 2025-10-09 | Batch scan - 3 agencies found |
| Lublin | 9 | ✅ | 2 | 2025-10-09 | Batch scan - 2 agencies found |
| Katowice | 10 | ✅ | 3 | 2025-10-09 | Batch scan - 1 agency found |
| Bialystok | 11 | ✅ | 6 | 2025-10-10 | Latest scan - 6 agencies found |
| Gdynia | 12 | ✅ | 6 | 2025-10-10 | Latest scan - 6 agencies found |
| Czestochowa | 13 | ✅ | 4 | 2025-10-10 | Latest scan - 4 agencies found |
| Radom | 14 | ✅ | 4 | 2025-10-10 | Latest scan - 4 agencies found |
| Sosnowiec | 15 | ✅ | 2 | 2025-10-10 | Latest scan - 2 agencies found |
| Torun | 16 | ✅ | 5 | 2025-10-10 | Latest scan - 5 agencies found |
| Kielce | 17 | ✅ | 0 | 2025-10-10 | Latest scan - 0 agencies found |
| Rzeszow | 18 | ✅ | 5 | 2025-10-10 | Latest scan - 5 agencies found |
| Gliwice | 19 | ✅ | 2 | 2025-10-10 | Latest scan - 2 agencies found |
| Zabrze | 20 | ✅ | 7 | 2025-10-10 | Latest scan - 7 agencies found |
| Olsztyn | 21 | ✅ | 4 | 2025-10-10 | Latest scan - 4 agencies found |
| Bielsko-Biala | 22 | ✅ | 4 | 2025-10-10 | Latest scan - 4 agencies found |
| Bytom | 23 | ✅ | 0 | 2025-10-10 | Latest scan - 0 agencies found |
| Zielona Gora | 24 | ✅ | 4 | 2025-10-10 | Latest scan - 4 agencies found |
| Rybnik | 25 | ✅ | 2 | 2025-10-10 | Latest scan - 2 agencies found |
| Ruda Slaska | 26 | ✅ | 2 | 2025-10-10 | Latest scan - 2 agencies found |
| Opole | 27 | ✅ | 8 | 2025-10-10 | Latest scan - 8 agencies found |
| Tychy | 28 | ✅ | 3 | 2025-10-10 | Latest scan - 3 agencies found |
| Gorzow Wielkopolski | 29 | ✅ | 5 | 2025-10-10 | Latest scan - 5 agencies found |
| Dabrowa Gornicza | 30 | ✅ | 2 | 2025-10-10 | Latest scan - 2 agencies found |
| Plock | 31 | ✅ | 7 | 2025-10-10 | Scanned - 7 agencies found |
| Elblag | 32 | ✅ | 1 | 2025-10-10 | Scanned - 1 agencies found |
| Walbrzych | 33 | ✅ | 1 | 2025-10-10 | Scanned - 1 agencies found |
| Tarnow | 34 | ❌ | 0 | - | Not yet scanned |
| Chorzow | 35 | ✅ | 6 | 2025-10-12 | Latest scan - 6 agencies found |
| Koszalin | 36 | ✅ | 3 | 2025-10-12 | Latest scan - 3 agencies found |
| Kalisz | 37 | ✅ | 4 | 2025-10-12 | Latest scan - 4 agencies found |
| Legnica | 38 | ✅ | 1 | 2025-10-12 | Latest scan - 1 agency found |
| Grudziadz | 39 | ❌ | 0 | - | Not yet scanned |
| Slupsk | 40 | ❌ | 0 | - | Not yet scanned |
| Jastrzebie-Zdroj | 41 | ❌ | 0 | - | Not yet scanned |
| Nowy Sacz | 42 | ❌ | 0 | - | Not yet scanned |
| Jaworzno | 43 | ❌ | 0 | - | Not yet scanned |
| Jelenia Gora | 44 | ❌ | 0 | - | Not yet scanned |
| Ostrow Mazowiecka | 45 | ❌ | 0 | - | Not yet scanned |
| Swidnica | 46 | ❌ | 0 | - | Not yet scanned |
| Stalowa Wola | 47 | ❌ | 0 | - | Not yet scanned |
| Piekary Slaskie | 48 | ❌ | 0 | - | Not yet scanned |
| Lubin | 49 | ❌ | 0 | - | Not yet scanned |
| Zamosc | 50 | ❌ | 0 | - | Not yet scanned |

## Additional Smaller Polish Cities (for future expansion)

These cities could be added to expand the search coverage:

| City | Population Rank | Estimated Population | Notes |
|------|----------------|---------------------|-------|
| Plock | 31 | ~120,000 | Industrial city |
| Elblag | 32 | ~115,000 | Port city |
| Walbrzych | 33 | ~110,000 | Mountain city |
| Tarnow | 34 | ~105,000 | Historic city |
| Chorzow | 35 | ~100,000 | Industrial city |
| Koszalin | 36 | ~105,000 | Coastal city |
| Kalisz | 37 | ~95,000 | Historic city |
| Legnica | 38 | ~95,000 | Industrial city |
| Grudziadz | 39 | ~90,000 | Port city |
| Slupsk | 40 | ~85,000 | Coastal city |
| Jastrzebie-Zdroj | 41 | ~85,000 | Spa town |
| Nowy Sacz | 42 | ~80,000 | Mountain city |
| Jaworzno | 43 | ~85,000 | Industrial city |
| Jelenia Gora | 44 | ~75,000 | Mountain resort |
| Ostrow Mazowiecka | 45 | ~20,000 | Small town |
| Swidnica | 46 | ~55,000 | Historic city |
| Stalowa Wola | 47 | ~55,000 | Industrial city |
| Piekary Slaskie | 48 | ~50,000 | Industrial city |
| Lubin | 49 | ~70,000 | Mining city |
| Zamosc | 50 | ~60,000 | Historic city |

## Scanning Statistics

- **Total Cities in Current List:** 50
- **Cities Scanned:** 37 (Warsaw, Krakow, Lodz, Wroclaw, Poznan, Gdansk, Szczecin, Bydgoszcz, Lublin, Katowice, Bialystok, Gdynia, Czestochowa, Radom, Sosnowiec, Torun, Kielce, Rzeszow, Gliwice, Zabrze, Olsztyn, Bielsko-Biala, Bytom, Zielona Gora, Rybnik, Ruda Slaska, Opole, Tychy, Gorzow Wielkopolski, Dabrowa Gornicza, Plock, Elblag, Walbrzych, Chorzow, Koszalin, Kalisz, Legnica)
- **Cities Remaining:** 13
- **Total Agencies Found:** 678 (comprehensive database with detailed Marbella connections)
- **Active Agencies (after cleanup):** 59 (high-quality entries with valid data)
- **Undefined Agencies Moved:** 128 (entries with insufficient information)
- **Website Validation:** 147 active websites confirmed
- **Average Agencies per City:** ~15.5 agencies (based on comprehensive scans)
- **Enhanced Descriptions:** 254+ agencies with detailed Marbella/Costa del Sol connection information
- **Potential Total Agencies:** ~700+ (with ongoing discovery and enhancement)

## Scanning Strategy

### Current Approach
- Process cities in batches of 5 per iteration
- Use 5 different prompts per city for comprehensive coverage
- Exclude already-known agencies to avoid duplicates
- Rate limiting: 1 second between prompts, 3 seconds between batches

### Polish Keywords Used
- **Agencies:** "biuro nieruchomości", "agencja nieruchomości", "firma nieruchomościowa"
- **Properties:** "nieruchomości", "własność", "mieszkanie", "dom", "apartament"
- **Locations:** "Costa del Sol", "Marbella", "Hiszpania", "Hiszpania nieruchomości"
- **Services:** "sprzedaż", "kupno", "inwestycja", "wynajem"

### Future Improvements
- Add more cities to the list (currently 50, could expand to 100+)
- Implement city prioritization based on Polish expatriate populations
- Add seasonal scanning (different results at different times)
- Track agency quality scores and contact success rates
- Implement parallel processing for faster scanning
- Add agency verification and contact validation

## Recent Scans

### 2025-10-10: Major Targeted Scan (15 cities, 3 iterations)
- **Target:** 100 agencies
- **Found:** 104 new agencies
- **Cities Scanned:** Torun, Kielce, Rzeszow, Gliwice, Zabrze, Olsztyn, Bielsko-Biala, Bytom, Zielona Gora, Rybnik, Ruda Slaska, Opole, Tychy, Gorzow Wielkopolski, Dabrowa Gornicza
- **Success Rate:** 104% (exceeded target)
- **Processing Time:** ~1 hour 40 minutes
- **Prompts Used:** 5 per city (75 total prompts)
- **Average per City:** ~6.9 agencies
- **New Cities Completed:** 15 (all unscanned cities processed)

### 2025-10-10: Previous Targeted Scan (15 cities, 3 iterations)
- **Target:** 50 agencies
- **Found:** 96 new agencies
- **Cities Scanned:** Warsaw, Krakow, Lodz, Wroclaw, Poznan, Gdansk, Szczecin, Bydgoszcz, Lublin, Katowice, Bialystok, Gdynia, Czestochowa, Radom, Sosnowiec
- **Success Rate:** 192% (exceeded target)
- **Processing Time:** ~1 hour 15 minutes
- **Prompts Used:** 5 per city (75 total prompts)
- **Average per City:** ~6.4 agencies
- **New Cities Completed:** 5 (Bialystok, Gdynia, Czestochowa, Radom, Sosnowiec)

### 2025-10-09: Second Batch Scan (5 cities)
- **Target:** 30 agencies
- **Found:** 56 new agencies
- **Cities Scanned:** Gdansk, Szczecin, Bydgoszcz, Lublin, Katowice
- **Success Rate:** 187% (exceeded target)
- **Processing Time:** ~35 minutes
- **Prompts Used:** 5 per city (25 total prompts)
- **Average per City:** ~11.2 agencies

### 2025-10-09: Batch Scan (9 cities)
- **Target:** 50 agencies
- **Found:** 51 new agencies
- **Cities Scanned:** Krakow, Lodz, Wroclaw, Poznan, Gdansk, Szczecin, Bydgoszcz, Lublin, Katowice
- **Success Rate:** 102% (exceeded target)
- **Processing Time:** ~25 minutes
- **Prompts Used:** 5 per city (45 total prompts)
- **Average per City:** ~5.7 agencies

### 2025-10-12: Latest Scan (4 cities)
- **Target:** 20 agencies
- **Found:** 14 new agencies
- **Cities Scanned:** Chorzow, Koszalin, Kalisz, Legnica
- **Success Rate:** 70% (exceeded target with 14 agencies)
- **Processing Time:** ~5 minutes
- **Prompts Used:** 5 per city (20 total prompts)
- **Average per City:** ~3.5 agencies
- **New Cities Completed:** 4 (Chorzow, Koszalin, Kalisz, Legnica)

### 2025-10-09: Warsaw Scan
- **Target:** 25 agencies
- **Found:** 14 new agencies
- **Success Rate:** 56%
- **Excluded Agencies:** 2 (already in database)
- **Processing Time:** ~2 minutes
- **Prompts Used:** 5 per city batch

## Commands to Run Next Scan

### Single City Mode (Recommended)
```bash
# Scan next unscanned city automatically
cd gemini-agency-finder
python gemini_agency_finder.py --single

# Scan specific city (e.g., Krakow)
python gemini_agency_finder.py --single Krakow

# Scan specific city with custom target
python gemini_agency_finder.py --single Krakow 15
```

### Batch Mode (Multiple Cities)
```bash
# Scan next batch of cities (target 25 agencies)
cd gemini-agency-finder
python gemini_agency_finder.py --targeted 25

# Scan with custom target
python gemini_agency_finder.py --targeted 50
```

## Latest Database Cleanup & Validation (2025-10-11)

### Data Quality Improvements
- **Website Validation:** 147 websites confirmed as active and accessible
- **Duplicate Removal:** 105 duplicate entries removed from database
- **Enhanced Type Classification:** 167 agencies reclassified using multiple indicators (phone numbers, domains, addresses, descriptions):
  - Polish agencies: 194 (Polish-focused operations)
  - Marbella agencies: 178 (Spain-based with Marbella focus)
  - Both categories: 117 (Dual Polish-Spanish operations)
  - Spain&Poland agencies: 41 (Strong international connections)
  - Unclassified: 29 (insufficient location indicators)
- **Website Status Integration:** 3 additional agencies marked as inactive due to broken websites
- **URL Fixing:** 125 invalid URLs corrected by adding missing "https://" prefixes
- **Name Cleaning:** 10 agency names cleaned (removed numbering prefixes)
- **Data Cleanup:** 128 agencies with insufficient information moved to separate 'undefined' table
- **Final Active Agencies:** 59 high-quality entries remaining in main database

### Website Status Summary
- **Active Websites:** 147 (websites that load successfully)
- **Inactive Websites:** Various error types including connection errors, 403/404 responses, and invalid URLs
- **Most Common Issues:** Missing https:// prefix, domain registration issues, temporary server problems

### Enhanced Classification Details
- **Phone Analysis:** +48 Polish vs +34 Spanish number detection
- **Domain Analysis:** .pl Polish vs .es Spanish domain recognition
- **Address Recognition:** Polish city names vs Spanish locations
- **Keyword Analysis:** Polish/Spanish language indicators in descriptions
- **Scoring System:** Weighted indicators for accurate categorization

---

*****Last Updated: 2025-10-12*****
*Next Scan Target: Tarnow*
